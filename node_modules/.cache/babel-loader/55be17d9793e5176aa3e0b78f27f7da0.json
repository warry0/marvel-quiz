{"ast":null,"code":"import _slicedToArray from\"/Users/dev/Desktop/marvel-quiz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{Fragment,useEffect,useState}from\"react\";import{GiTrophyCup}from\"react-icons/gi\";import Loader from\"../Loader\";import Modal from\"../Modal\";import axios from\"axios\";var QuizOver=/*#__PURE__*/React.forwardRef(function(props,ref){var levelNames=props.levelNames,score=props.score,maxQuestions=props.maxQuestions,quizLevel=props.quizLevel,percent=props.percent,loadLevelQuestions=props.loadLevelQuestions;var API_PUBLIC_KEY=process.env.REACT_APP_MARVEL_API_KEY;console.log(API_PUBLIC_KEY);var hash=\"5925445446127dde7e6e9a76905a19f2\";var _useState=useState([]),_useState2=_slicedToArray(_useState,2),asked=_useState2[0],setAsked=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),openModal=_useState4[0],setOpenModal=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),characterInfos=_useState6[0],setCharacterInfos=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),loading=_useState8[0],setLoading=_useState8[1];useEffect(function(){setAsked(ref.current);if(localStorage.getItem(\"marvelStorageDate\")){var date=localStorage.getItem(\"marvelStorageDate\");checkDataAge(date);}},[ref]);var checkDataAge=function checkDataAge(date){var today=Date.now();var timeDifference=today-date;var daysDifference=timeDifference/(1000*3600*24);if(daysDifference>=15){localStorage.clear();localStorage.setItem(\"marvelStorageDate\",Date.now());}};var showModal=function showModal(id){setOpenModal(true);if(localStorage.getItem(id)){setCharacterInfos(JSON.parse(localStorage.getItem(id)));setLoading(false);}else{axios.get(\"https://gateway.marvel.com/v1/public/characters/\".concat(id,\"?ts=1&apikey=\").concat(API_PUBLIC_KEY,\"&hash=\").concat(hash)).then(function(response){setCharacterInfos(response.data);setLoading(false);localStorage.setItem(id,JSON.stringify(response.data));if(!localStorage.getItem(\"marvelStorageDate\")){localStorage.setItem(\"marvelStorageDate\",Date.now());}}).catch(function(err){return console.log(err);});}};var hideModal=function hideModal(){setOpenModal(false);setLoading(true);};var capitalizeFirestletter=function capitalizeFirestletter(string){return string.charAt(0).toUpperCase()+string.slice(1);};var averageGrade=maxQuestions/2;if(score<averageGrade){setTimeout(function(){return loadLevelQuestions(quizLevel);},3000);}var decision=score>=averageGrade?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"stepsBtnContainer\",children:quizLevel<levelNames.length?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{className:\"successMsg\",children:\"Bravo, passez au niveau suivant!\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btnResult success\",onClick:function onClick(){return loadLevelQuestions(quizLevel);},children:\"Niveau Suivant\"})]}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(\"p\",{className:\"successMsg\",children:[/*#__PURE__*/_jsx(GiTrophyCup,{size:\"50px\"}),\" Bravo, vous \\xEAtes un expert !\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btnResult gameOver\",onClick:function onClick(){return loadLevelQuestions(0);},children:\"Accueil\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"percentage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progressPercent\",children:[\"R\\xE9ussite: \",percent,\" %\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progressPercent\",children:[\"Note: \",score,\"/\",maxQuestions]})]})]}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"stepsBtnContainer\",children:/*#__PURE__*/_jsx(\"p\",{className:\"failureMsg\",children:\"Vous avez \\xE9chou\\xE9 !\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"percentage\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"progressPercent\",children:[\"R\\xE9ussite: \",percent,\" %\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"progressPercent\",children:[\"Note: \",score,\"/\",maxQuestions]})]})]});var questionAnswer=score>=averageGrade?asked.map(function(question){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:question.question}),/*#__PURE__*/_jsx(\"td\",{children:question.answer}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btnInfo\",onClick:function onClick(){return showModal(question.heroId);},children:\"Infos\"})})]},question.id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"3\",children:/*#__PURE__*/_jsx(Loader,{loadingMsg:\"pas de réponses!\",styling:{textAlign:\"center\",color:\"red\"}})})});var resultInModal=!loading?/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modalHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:characterInfos.data.results[0].name})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modalBody\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comicImage\",children:[/*#__PURE__*/_jsx(\"img\",{src:characterInfos.data.results[0].thumbnail.path+\".\"+characterInfos.data.results[0].thumbnail.extension,alt:characterInfos.data.results[0].name}),/*#__PURE__*/_jsx(\"p\",{children:characterInfos.attributionText})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comicDetails\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Description\"}),characterInfos.data.results[0].description?/*#__PURE__*/_jsx(\"p\",{children:characterInfos.data.results[0].description}):/*#__PURE__*/_jsx(\"p\",{children:\"Description indisponible ...\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"Plus d'infos\"}),characterInfos.data.results[0].urls&&characterInfos.data.results[0].urls.map(function(url,index){return/*#__PURE__*/_jsx(\"a\",{href:url.url,target:\"_blank\",rel:\"noopener noreferrer\",children:capitalizeFirestletter(url.type)},index);})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modalFooter\",children:/*#__PURE__*/_jsx(\"button\",{className:\"modalBtn\",onClick:hideModal,children:\"Fermer\"})})]}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modalHeader\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"R\\xE9ponse de Marvel ...\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"modalBody\",children:/*#__PURE__*/_jsx(Loader,{})})]});return/*#__PURE__*/_jsxs(Fragment,{children:[decision,/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:\"Les r\\xE9ponses aux questions pos\\xE9es:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"answerContainer\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"answers\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Question\"}),/*#__PURE__*/_jsx(\"th\",{children:\"R\\xE9ponses\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Infos\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:questionAnswer})]})}),/*#__PURE__*/_jsx(Modal,{showModal:openModal,hideModal:hideModal,children:resultInModal})]});});export default/*#__PURE__*/React.memo(QuizOver);","map":{"version":3,"sources":["/Users/dev/Desktop/marvel-quiz/src/components/QuizOver/index.js"],"names":["React","Fragment","useEffect","useState","GiTrophyCup","Loader","Modal","axios","QuizOver","forwardRef","props","ref","levelNames","score","maxQuestions","quizLevel","percent","loadLevelQuestions","API_PUBLIC_KEY","process","env","REACT_APP_MARVEL_API_KEY","console","log","hash","asked","setAsked","openModal","setOpenModal","characterInfos","setCharacterInfos","loading","setLoading","current","localStorage","getItem","date","checkDataAge","today","Date","now","timeDifference","daysDifference","clear","setItem","showModal","id","JSON","parse","get","then","response","data","stringify","catch","err","hideModal","capitalizeFirestletter","string","charAt","toUpperCase","slice","averageGrade","setTimeout","decision","length","questionAnswer","map","question","answer","heroId","textAlign","color","resultInModal","results","name","thumbnail","path","extension","attributionText","description","urls","url","index","type","memo"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { GiTrophyCup } from \"react-icons/gi\";\nimport Loader from \"../Loader\";\nimport Modal from \"../Modal\";\nimport axios from \"axios\";\n\nconst QuizOver = React.forwardRef((props, ref) => {\n  const {\n    levelNames,\n    score,\n    maxQuestions,\n    quizLevel,\n    percent,\n    loadLevelQuestions,\n  } = props;\n\n  const API_PUBLIC_KEY = process.env.REACT_APP_MARVEL_API_KEY;\n  console.log(API_PUBLIC_KEY)\n  const hash = \"5925445446127dde7e6e9a76905a19f2\";\n\n  const [asked, setAsked] = useState([]);\n  const [openModal, setOpenModal] = useState(false);\n  const [characterInfos, setCharacterInfos] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    setAsked(ref.current);\n\n    if (localStorage.getItem(\"marvelStorageDate\")) {\n      const date = localStorage.getItem(\"marvelStorageDate\");\n      checkDataAge(date);\n    }\n  }, [ref]);\n\n  const checkDataAge = (date) => {\n    const today = Date.now();\n    const timeDifference = today - date;\n\n    const daysDifference = timeDifference / (1000 * 3600 * 24);\n\n    if (daysDifference >= 15) {\n      localStorage.clear();\n      localStorage.setItem(\"marvelStorageDate\", Date.now());\n    }\n  };\n\n  const showModal = (id) => {\n    setOpenModal(true);\n\n    if (localStorage.getItem(id)) {\n      setCharacterInfos(JSON.parse(localStorage.getItem(id)));\n      setLoading(false);\n    } else {\n      axios\n        .get(\n          `https://gateway.marvel.com/v1/public/characters/${id}?ts=1&apikey=${API_PUBLIC_KEY}&hash=${hash}`\n        )\n        .then((response) => {\n          setCharacterInfos(response.data);\n          setLoading(false);\n\n          localStorage.setItem(id, JSON.stringify(response.data));\n          if (!localStorage.getItem(\"marvelStorageDate\")) {\n            localStorage.setItem(\"marvelStorageDate\", Date.now());\n          }\n        })\n        .catch((err) => console.log(err));\n    }\n  };\n\n  const hideModal = () => {\n    setOpenModal(false);\n    setLoading(true);\n  };\n\n  const capitalizeFirestletter = (string) => {\n    return string.charAt(0).toUpperCase() + string.slice(1);\n  };\n\n  const averageGrade = maxQuestions / 2;\n\n  if (score < averageGrade) {\n    setTimeout(() => loadLevelQuestions(quizLevel), 3000);\n  }\n\n  const decision =\n    score >= averageGrade ? (\n      <Fragment>\n        <div className=\"stepsBtnContainer\">\n          {quizLevel < levelNames.length ? (\n            <Fragment>\n              <p className=\"successMsg\">Bravo, passez au niveau suivant!</p>\n              <button\n                className=\"btnResult success\"\n                onClick={() => loadLevelQuestions(quizLevel)}\n              >\n                Niveau Suivant\n              </button>\n            </Fragment>\n          ) : (\n            <Fragment>\n              <p className=\"successMsg\">\n                <GiTrophyCup size=\"50px\" /> Bravo, vous êtes un expert !\n              </p>\n              <button\n                className=\"btnResult gameOver\"\n                onClick={() => loadLevelQuestions(0)}\n              >\n                Accueil\n              </button>\n            </Fragment>\n          )}\n        </div>\n        <div className=\"percentage\">\n          <div className=\"progressPercent\">Réussite: {percent} %</div>\n          <div className=\"progressPercent\">\n            Note: {score}/{maxQuestions}\n          </div>\n        </div>\n      </Fragment>\n    ) : (\n      <Fragment>\n        <div className=\"stepsBtnContainer\">\n          <p className=\"failureMsg\">Vous avez échoué !</p>\n        </div>\n\n        <div className=\"percentage\">\n          <div className=\"progressPercent\">Réussite: {percent} %</div>\n          <div className=\"progressPercent\">\n            Note: {score}/{maxQuestions}\n          </div>\n        </div>\n      </Fragment>\n    );\n\n  const questionAnswer =\n    score >= averageGrade ? (\n      asked.map((question) => {\n        return (\n          <tr key={question.id}>\n            <td>{question.question}</td>\n            <td>{question.answer}</td>\n            <td>\n              <button\n                className=\"btnInfo\"\n                onClick={() => showModal(question.heroId)}\n              >\n                Infos\n              </button>\n            </td>\n          </tr>\n        );\n      })\n    ) : (\n      <tr>\n        <td colSpan=\"3\">\n          <Loader\n            loadingMsg={\"pas de réponses!\"}\n            styling={{ textAlign: \"center\", color: \"red\" }}\n          />\n        </td>\n      </tr>\n    );\n\n  const resultInModal = !loading ? (\n    <Fragment>\n      <div className=\"modalHeader\">\n        <h2>{characterInfos.data.results[0].name}</h2>\n      </div>\n      <div className=\"modalBody\">\n        <div className=\"comicImage\">\n          <img\n            src={\n              characterInfos.data.results[0].thumbnail.path +\n              \".\" +\n              characterInfos.data.results[0].thumbnail.extension\n            }\n            alt={characterInfos.data.results[0].name}\n          />\n\n          <p>{characterInfos.attributionText}</p>\n        </div>\n        <div className=\"comicDetails\">\n          <h3>Description</h3>\n          {characterInfos.data.results[0].description ? (\n            <p>{characterInfos.data.results[0].description}</p>\n          ) : (\n            <p>Description indisponible ...</p>\n          )}\n          <h3>Plus d'infos</h3>\n          {characterInfos.data.results[0].urls &&\n            characterInfos.data.results[0].urls.map((url, index) => {\n              return (\n                <a\n                  key={index}\n                  href={url.url}\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                >\n                  {capitalizeFirestletter(url.type)}\n                </a>\n              );\n            })}\n        </div>\n      </div>\n      <div className=\"modalFooter\">\n        <button className=\"modalBtn\" onClick={hideModal}>\n          Fermer\n        </button>\n      </div>\n    </Fragment>\n  ) : (\n    <Fragment>\n      <div className=\"modalHeader\">\n        <h2>Réponse de Marvel ...</h2>\n      </div>\n      <div className=\"modalBody\">\n        <Loader />\n      </div>\n    </Fragment>\n  );\n\n  return (\n    <Fragment>\n      {decision}\n\n      <hr />\n      <p>Les réponses aux questions posées:</p>\n\n      <div className=\"answerContainer\">\n        <table className=\"answers\">\n          <thead>\n            <tr>\n              <th>Question</th>\n              <th>Réponses</th>\n              <th>Infos</th>\n            </tr>\n          </thead>\n          <tbody>{questionAnswer}</tbody>\n        </table>\n      </div>\n\n      <Modal showModal={openModal} hideModal={hideModal}>\n        {resultInModal}\n      </Modal>\n    </Fragment>\n  );\n});\n\nexport default React.memo(QuizOver);\n"]},"metadata":{},"sourceType":"module"}