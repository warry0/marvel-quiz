{"ast":null,"code":"import _defineProperty from\"/Users/dev/Desktop/marvel-quiz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/dev/Desktop/marvel-quiz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/dev/Desktop/marvel-quiz/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useContext}from\"react\";import{Link}from\"react-router-dom\";import{FirebaseContext}from\"../Firebase\";var Signup=function Signup(props){var firebase=useContext(FirebaseContext);var data={pseudo:\"\",email:\"\",password:\"\",confirmPassword:\"\"};var _useState=useState(data),_useState2=_slicedToArray(_useState,2),loginData=_useState2[0],setLoginData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var handleChange=function handleChange(e){setLoginData(_objectSpread(_objectSpread({},loginData),{},_defineProperty({},e.target.id,e.target.value)));};var handleSubmit=function handleSubmit(e){e.preventDefault();var email=loginData.email,password=loginData.password,pseudo=loginData.pseudo;firebase.signupUser(email,password).then(function(authUser){return firebase.user(authUser.user.uid).set({pseudo:pseudo,email:email});}).then(function(){setLoginData(_objectSpread({},data));props.history.push(\"/welcome\");}).catch(function(error){setError(error);});};var pseudo=loginData.pseudo,email=loginData.email,password=loginData.password,confirmPassword=loginData.confirmPassword;var btn=pseudo===\"\"||email===\"\"||password===\"\"||password!==confirmPassword?/*#__PURE__*/_jsx(\"button\",{disabled:true,children:\"Inscription\"}):/*#__PURE__*/_jsx(\"button\",{children:\"Inscription\"});//Gestion err\nvar errMsg=error!==\"\"&&/*#__PURE__*/_jsx(\"span\",{children:error.message});return/*#__PURE__*/_jsx(\"div\",{className:\"signUpLoginBox\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"slContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"formBoxLeftSignup\"}),/*#__PURE__*/_jsx(\"div\",{className:\"formBoxRight\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"formContent\",children:[errMsg,/*#__PURE__*/_jsx(\"h2\",{children:\"Inscription\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,value:pseudo,type:\"text\",id:\"pseudo\",autoComplete:\"off\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"pseudo\",children:\"Pseudo\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,value:email,type:\"email\",id:\"email\",autoComplete:\"on\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,value:password,type:\"password\",id:\"password\",autoComplete:\"off\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Mot de passe\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,value:confirmPassword,type:\"password\",id:\"confirmPassword\",autoComplete:\"off\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmPassword\",children:\"Confirmer le mot de passe\"})]}),btn]}),/*#__PURE__*/_jsx(\"div\",{className:\"linkContainer\",children:/*#__PURE__*/_jsx(Link,{className:\"simpleLink\",to:\"/login\",children:\"D\\xE9j\\xE0 inscrit? Connectez-vous.\"})})]})})]})});};export default Signup;","map":{"version":3,"sources":["/Users/dev/Desktop/marvel-quiz/src/components/Signup/index.js"],"names":["React","useState","useContext","Link","FirebaseContext","Signup","props","firebase","data","pseudo","email","password","confirmPassword","loginData","setLoginData","error","setError","handleChange","e","target","id","value","handleSubmit","preventDefault","signupUser","then","authUser","user","uid","set","history","push","catch","btn","errMsg","message"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { FirebaseContext } from \"../Firebase\";\n\nconst Signup = (props) => {\n  const firebase = useContext(FirebaseContext);\n\n  const data = {\n    pseudo: \"\",\n    email: \"\",\n    password: \"\",\n    confirmPassword: \"\",\n  };\n\n  const [loginData, setLoginData] = useState(data);\n  const [error, setError] = useState(\"\");\n\n  const handleChange = (e) => {\n    setLoginData({ ...loginData, [e.target.id]: e.target.value });\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const { email, password, pseudo } = loginData;\n    firebase\n      .signupUser(email, password)\n      .then((authUser) => {\n        return firebase.user(authUser.user.uid).set({\n          pseudo,\n          email,\n        });\n      })\n      .then(() => {\n        setLoginData({ ...data });\n        props.history.push(\"/welcome\");\n      })\n      .catch((error) => {\n        setError(error);\n      });\n  };\n\n  const { pseudo, email, password, confirmPassword } = loginData;\n\n  const btn =\n    pseudo === \"\" ||\n    email === \"\" ||\n    password === \"\" ||\n    password !== confirmPassword ? (\n      <button disabled>Inscription</button>\n    ) : (\n      <button>Inscription</button>\n    );\n\n  //Gestion err\n  const errMsg = error !== \"\" && <span>{error.message}</span>;\n\n  return (\n    <div className=\"signUpLoginBox\">\n      <div className=\"slContainer\">\n        <div className=\"formBoxLeftSignup\"></div>\n        <div className=\"formBoxRight\">\n          <div className=\"formContent\">\n            {errMsg}\n\n            <h2>Inscription</h2>\n            <form onSubmit={handleSubmit}>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={pseudo}\n                  type=\"text\"\n                  id=\"pseudo\"\n                  autoComplete=\"off\"\n                  required\n                />\n                <label htmlFor=\"pseudo\">Pseudo</label>\n              </div>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={email}\n                  type=\"email\"\n                  id=\"email\"\n                  autoComplete=\"on\"\n                  required\n                />\n                <label htmlFor=\"email\">Email</label>\n              </div>\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={password}\n                  type=\"password\"\n                  id=\"password\"\n                  autoComplete=\"off\"\n                  required\n                />\n                <label htmlFor=\"password\">Mot de passe</label>\n              </div>\n\n              <div className=\"inputBox\">\n                <input\n                  onChange={handleChange}\n                  value={confirmPassword}\n                  type=\"password\"\n                  id=\"confirmPassword\"\n                  autoComplete=\"off\"\n                  required\n                />\n                <label htmlFor=\"confirmPassword\">\n                  Confirmer le mot de passe\n                </label>\n              </div>\n              {btn}\n            </form>\n            <div className=\"linkContainer\">\n              <Link className=\"simpleLink\" to=\"/login\">\n                Déjà inscrit? Connectez-vous.\n              </Link>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}